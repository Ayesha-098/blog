{% extends 'base.html' %} {% block content %}
<div class="container mt-5">
  <h1 class="mb-3">{{ post.title }}</h1>
  <p class="text-muted mb-4">
    By <strong>{{ post.author.username }}</strong> &bull; 
  </p>

  {% if post.tags.exists %}
  <p class="mb-4">
    {% for tag in post.tags.all %}
    <span class="badge bg-secondary me-1">{{ tag.name }}</span>
    {% endfor %}
  </p>
  {% endif %}

  <div class="mb-5 fs-5">
    {{ post.description|linebreaksbr }}
  </div>

  <hr />

  <h4 class="mb-4">Comments</h4>
  <div class="mb-5">
    {% for comment in comments %}
    <div class="border rounded p-3 mb-3 shadow-sm bg-light">
      <p class="mb-1">
        <strong>{{ comment.author.username }}</strong>
        <small class="text-muted ms-2"
          >{{ comment.created_at|date:"F j, Y, g:i a" }}</small
        >
      </p>
      <p class="mb-0">{{ comment.content|linebreaks }}</p>
    </div>
    {% empty %}
    <p class="fst-italic text-muted">
      No comments yet. Be the first to comment!
    </p>
    {% endfor %}
  </div>

  {% if user.is_authenticated %}
  <h5 class="mb-3">Leave a Comment</h5>
  <form method="post" class="mb-5">
    {% csrf_token %} {{ comment_form.as_p }}
    <button type="submit" class="btn btn-primary btn-sm">Post Comment</button>
  </form>
  {% else %}
  <p><a href="{% url 'login' %}">Login</a> to comment.</p>
  {% endif %}
</div>
{% endblock %}
